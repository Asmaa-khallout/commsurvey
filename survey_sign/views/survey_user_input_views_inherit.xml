<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="survey_user_input_view_form_inherit" model="ir.ui.view">
            <field name="name">survey_user_input_view_form_inherit</field>
            <field name="model">survey.user_input</field>
            <field name="inherit_id" ref="survey.survey_user_input_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header" position="inside">
                 <button name="relancer_user" string="Relancer" type="object" class="oe_highlight" attrs="{'invisible': [('state_signature', '!=', 'not_signe')]}"/>
                </xpath>
                <xpath expr='//notebook' position='inside'>
                    <page string="Signature">
                        <field name="state_signature" invisible="1"/>
	                <group  attrs="{'invisible': [('state_signature', '!=', 'signe')]}">
                        <field name="signed_by"  readonly="1"/>
                        <field name="signed_on"  readonly="1"/>
                        <field name="signature" widget="image" readonly="1"/>

                    </group>
                        <group  attrs="{'invisible': [('state_signature', '!=', 'not_signe')]}">
                        <field name="motif"  readonly="1"/>
                    </group>
                    </page>
                </xpath>

                 <xpath expr="//field[@name='user_input_line_ids']" position="replace">
                     <field name="user_input_line_ids" mode="tree" readonly="0" no_label="1">
                         <tree>
                           <field name="question_id"/>
                           <field name="display_name" string="Answer"/>
                         </tree>
                                <form >
                                    <group>
                                    <field name="page_id" no_label="1" readonly="1"  style="pointer-events:none;"/>
                                    <field name="question_id" readonly="1" style="pointer-events:none;"/>
                                    <field name="display_name" string="Answer" readonly="0"/>
                                    </group>
                                </form>
                            </field>

                </xpath>
            </field>
        </record>
        <record id="survey_user_input_view_tree_inherit" model="ir.ui.view">
            <field name="name">survey_user_input_tree_inherit</field>
            <field name="model">survey.user_input</field>
            <field name="inherit_id" ref="survey.survey_user_input_view_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='state']" position='after'>
                 <field name="state_signature" widget="badge" decoration-success="state_signature == 'signe'" decoration-danger="state_signature == 'not_signe'"/>
                </xpath>
               <field name="nickname" optional="hide" position='replace'/>
                <field name="partner_id" position='replace'/>
                <field name="email" position='replace'/>
                <field name="attempts_number"  position='replace'/>
                <field name="deadline"  position='replace'/>
                <field name="scoring_success"  position='replace'/>
                <field name="scoring_percentage"  position='replace'/>
            </field>
        </record>

    </data>
</odoo>